# 数据集制作方法
> 2023.7.28

1. 首先找李志翀学长取一份素材视频
2. 将素材视频放到当前目录下
3. 使用`frame.py`文件将素材视频逐帧提取成图片放到`images`目录下。  
使用方法：调用python解释器运行`frame.py`文件 。命令行运行`python frame.py ./视频名称 ./images`。调用命令`python frame.py --help`也可以查看`frame.py`使用方法。  
第一次使用`frame.py`时一定要打开该文件，将里面的全局变量`name`替换为自己的名字拼音首字母缩写或是其他特殊名称，避免标注的图像名称与其他人的重复。首次使用时将`num.txt`里面的数字改为0，然后就再也不要改动这个数字，避免你自己标注的图像序号前后重复。
4. 使用ubuntu下的软件`labelImg`进行图像标注。该软件在windows下不稳定，容易突然崩溃。
    1. 下载方法：`pip install labelimg`。注意下载时的i是小写的
    2. 使用方法：命令行输入命令`labelImg`。注意启动时的i是大写的
5. `labelImg`软件使用方法。  
打开软件后
    1. 点击**打开目录**，打开当前文件夹下的images目录。
    2. 点击**打开存放目录**，打开当前文件夹下的labels目录。这个目录会以txt文件形式存放你给每张图片标注的信息。txt文件中每行第一个数字表示对应的标签类型，后四个数字表示标注框的四个点的坐标（做过归一化处理）
    3. 点击**查看**，勾选上自动保存模式
    4. 按`w`键开始标注，按`A`键切换到上一张图片，按`D`键切换到下一张图片。
    5. 标签设置方法：标签名字无所谓，可以自己任意起名字，但是重要的是保存的txt文件中标签对应的数字。你设置的第一个标签在保存的txt文件中对应数字为0，第二个标签对应数字为1。**为了所有人统一，蓝色靶标的标签对应数字0，红色靶标的标签对应数字1**。到时候训练时会特意告诉机器0对应的是蓝色靶标，1对应的是红色靶标。所以标注时起的标签名字不重要，重要的是对应的数字以及我训练时告诉机器0和1对应的是哪种类型的靶标。  
    **蓝色对应0，红色对应1的标签设置方法：标注第一张图片时，不管标注的靶标是蓝色还是红色，均把标签设置为`blue`，标注第二张图片时，均把标签设置为`red`。至此蓝色对应0，红色对应1就设置完毕。然后你再回到前两张图片，把当中靶标对应的标签设置为正确的颜色。简单来说，就是你设置的第一个标签一定要是`blue`，设置的第二个标签一定要是`red`，然后再从头开始按正确的颜色进行标注**
    6. 标注时你拉的方框一定要完全包住靶标，框一个靶标的最小外接矩形即可。可以比最小外接矩形稍微大一点点，但是不要大太多，最不容许的情况是框比靶标小，把靶标给切到了。就是宁可大不可小，但是不要大太多。到时候电脑会学习你框的范围和大小，你框的质量好坏直接影响到视觉识别的准确度。
6. 如果你的红蓝标签对应的数字弄反了，可以使用`change_labels.py`进行修改。但是目前只支持修改你标注的图片中只有一种类型的靶标的情况。
7. `split_train_vel.py`用于将标注好的数据集划分为训练集和验证集，该代码的说明和使用方法见文章[目标检测算法---将数据集为划分训练集和验证集](https://blog.csdn.net/didiaopao/article/details/119927280)